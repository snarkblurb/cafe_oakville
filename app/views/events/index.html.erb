<% provide(:title, 'All events') %>

<h1>Reserve a spot</h1>

<div class="row">
	<div class="col-md-4 col-md-offset-4">
		<% @events.each do |event| %>
			<%= event.day.strftime("%B %-d, %Y") %>
			<% if !@user.reservations.find_by(event_id: event.id) %>
				<%= form_for(@user.reservations.build(event_id: event.id)) do |f| %>
					<%= f.hidden_field :event_id, value: event.id %>
					<%= f.hidden_field :user_id, value: @user.id %>
					<%= f.submit "Sign up", class: "btn btn-primary" %>
				<% end %>
			<% else %>
				<%= form_for(@user.reservations.find_by(event_id: event.id),
					html: { method: :delete }) do |f| %>
					<%= f.hidden_field :event_id, value: event.id %>
					<%= f.hidden_field :user_id, value: @user.id %>
					<%= f.submit "Cancel", class: "btn btn-cancel" %>
				<% end %>
			<% end %>
		<% end %>
		
	</div>
</div>












<!--
<div id="all-events">
  <h1>All events</h1>

  <ul class="events">
  <% @events.each do |event| %>
		<li class="date-section"><%= event.day.strftime("%B %-d, %Y") %></li>
			<ul class="event-user-list">
				<% if !event.users.empty? %>
					<% event.users.each do |user| %>
						<li><%= user.name %></li>
					<% end %>
				<% end %>
			</ul>
	<% end %>
	</ul>

	<p>
		<%= link_to "Add event", events_new_path %>
	</p>
</div>
-->
